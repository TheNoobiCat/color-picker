!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ColorPicker=e()}(this,(function(){"use strict";var t={color:"white"};const e=t=>t.match(/\((.*)\)/)[1].split(",").map(Number),n=t=>{var e,n=document.createElement("canvas").getContext("2d");return n.fillStyle=t,"#"==(e=n.fillStyle)[0]?e:a(e)},a=t=>{const[n,a,i,s]=e(t),r="#"+[n,a,i].map((t=>t.toString(16).padStart(2,"0"))).join("");return 3==t.length?r:r+Math.round(255*s).toString(16).padStart(2,"0")};function i({name:t,min:e=0,max:n=100,value:a}){return`<div class="range color-picker__${t}" title="${t}" style="--min:${e}; --max:${n}; --value:${a}; --text-value:'${a}'">\n            <input type="range" name="${t}" value="${a}" min="${e}" max="${n}">\n            <output></output>\n            <div class='range__progress'></div>\n          </div>`}function s(t){return`\n    <div class='color-picker__value'>\n      <input name='value' value='${n(t)}'>\n    </div>\n  `}var r=Object.freeze({__proto__:null,scope:function(){const{h:t,s:e,l:n,a:a}=this.color;return`\n    <div class='color-picker'>\n      ${i({name:"hue",value:t,max:"360"})}\n      ${i({name:"saturation",value:e})}\n      ${i({name:"lightness",value:n})}\n      ${i({name:"alpha",value:a})}\n      <output></output>\n      ${s(this.color)}\n    </div>\n  `},slider:i,value:s});function o(e){this.settings=Object.assign({},t,e),this.color=this.getHSLA()||{h:0,s:0,l:0,a:100},this.DOM={},this.init()}return o.prototype={templates:r,getHSLA(t=this.settings.color){let a;var i;return console.log(t),t.indexOf("hsla")?a=(t=>{let[n,a,i,s]=e(t);n/=255,a/=255,i/=255;let r=Math.max(n,a,i),o=Math.min(n,a,i),l=r-o,u=0,p=0,c=((r+o)/2).toPrecision(2);return l&&(p=c>.5?l/(2-r-o):l/(r+o),u=r==n?(a-i)/l+(a<i?6:0):u=r==a?(i-n)/l+2:(n-a)/l+4,u/=6),{h:360*u,s:100*p,l:100*c,a:100*s}})(t=(t=>{const[e,n,a,i]=(t=>t.match(/\w\w/g))(t),[s,r,o]=[e,n,a].map((t=>parseInt(t,16)));return`rgba(${s},${r},${o},${i?(parseInt(i,16)/255).toFixed(2):1})`})(t=n(t))):(i=t,a=Object.assign([0,0,0,1],i.match(/\((.*)\)/)[1].split(",").map(((t,e)=>3!=e||t.includes("%")?parseFloat(t):100*parseFloat(t)))),a={h:a[0],s:a[1],l:a[2],a:a[3]}),a},onInput(t){const{name:e,value:n,type:a}=t.target;"range"==a&&(this.updateColor(e,n),t.target.parentNode.style.setProperty("--value",n),t.target.parentNode.style.setProperty("--text-value",JSON.stringify(n)))},updateColor(t,e){this.DOM.scope.style.setProperty("--"+t,e)},bindEvents(){this.DOM.scope.addEventListener("input",this.onInput.bind(this))},initialUpdate(){this.DOM.scope.querySelectorAll('input[type="range"]').forEach((t=>this.updateColor(t.name,t.value)))},init(){const t=this.templates.scope.call(this);var e;this.DOM.scope=(e=t,(new DOMParser).parseFromString(e.trim(),"text/html").body.firstElementChild),this.initialUpdate(),this.bindEvents()}},o}));
